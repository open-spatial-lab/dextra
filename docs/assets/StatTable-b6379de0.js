import{x as S}from"./lit-element-47511895.js";import{s as D,n as c}from"./safeCustomElement-f1504f3f.js";import{O as E}from"./Data-0e2d5449.js";import"./Table-4e14750b.js";import{g as N}from"./numberFormatter-30f4b9e1.js";import{i as _}from"./converters-40be0569.js";function B(e){if(e.length===0)return 0;var t=e[0],r=0,n;if(typeof t!="number")return NaN;for(var a=1;a<e.length;a++){if(typeof e[a]!="number")return NaN;n=t+e[a],Math.abs(t)>=Math.abs(e[a])?r+=t-n+e[a]:r+=e[a]-n+t,t=n}return t+r}function d(e){if(e.length===0)throw new Error("mean requires at least one data point");return B(e)/e.length}function C(e,t){var r=d(e),n=0,a,o;if(t===2)for(o=0;o<e.length;o++)a=e[o]-r,n+=a*a;else for(o=0;o<e.length;o++)n+=Math.pow(e[o]-r,t);return n}function P(e){if(e.length===0)throw new Error("variance requires at least one data point");return C(e,2)/e.length}function A(e){if(e.length===1)return 0;var t=P(e);return Math.sqrt(t)}function F(e){if(e.length===0)throw new Error("min requires at least one data point");for(var t=e[0],r=1;r<e.length;r++)e[r]<t&&(t=e[r]);return t}function R(e){if(e.length===0)throw new Error("max requires at least one data point");for(var t=e[0],r=1;r<e.length;r++)e[r]>t&&(t=e[r]);return t}function y(e,t){var r=e.length*t;if(e.length===0)throw new Error("quantile requires at least one data point.");if(t<0||t>1)throw new Error("quantiles must be between 0 and 1");return t===1?e[e.length-1]:t===0?e[0]:r%1!==0?e[Math.ceil(r)-1]:e.length%2===0?(e[r-1]+e[r])/2:e[r]}function g(e,t,r,n){for(r=r||0,n=n||e.length-1;n>r;){if(n-r>600){var a=n-r+1,o=t-r+1,l=Math.log(a),s=.5*Math.exp(2*l/3),h=.5*Math.sqrt(l*s*(a-s)/a);o-a/2<0&&(h*=-1);var M=Math.max(r,Math.floor(t-o*s/a+h)),O=Math.min(n,Math.floor(t+(a-o)*s/a+h));g(e,t,M,O)}var p=e[t],m=r,u=n;for(v(e,r,t),e[n]>p&&v(e,r,n);m<u;){for(v(e,m,u),m++,u--;e[m]<p;)m++;for(;e[u]>p;)u--}e[r]===p?v(e,r,u):(u++,v(e,u,n)),u<=t&&(r=u+1),t<=u&&(n=u-1)}}function v(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function w(e,t){var r=e.slice();if(Array.isArray(t)){V(r,t);for(var n=[],a=0;a<t.length;a++)n[a]=y(r,t[a]);return n}else{var o=b(r.length,t);return q(r,o,0,r.length-1),y(r,t)}}function q(e,t,r,n){t%1===0?g(e,t,r,n):(t=Math.floor(t),g(e,t,r,n),g(e,t+1,t+1,n))}function V(e,t){for(var r=[0],n=0;n<t.length;n++)r.push(b(e.length,t[n]));r.push(e.length-1),r.sort($);for(var a=[0,r.length-1];a.length;){var o=Math.ceil(a.pop()),l=Math.floor(a.pop());if(!(o-l<=1)){var s=Math.floor((l+o)/2);q(e,r[s],Math.floor(r[l]),Math.ceil(r[o])),a.push(l,s,s,o)}}}function $(e,t){return e-t}function b(e,t){var r=e*t;return t===1?e-1:t===0?0:r%1!==0?Math.ceil(r)-1:e%2===0?r-.5:r}function I(e){var t=w(e,.75),r=w(e,.25);if(typeof t=="number"&&typeof r=="number")return t-r}var J=Object.defineProperty,Q=Object.getOwnPropertyDescriptor,f=(e,t,r,n)=>{for(var a=n>1?void 0:n?Q(t,r):t,o=e.length-1,l;o>=0;o--)(l=e[o])&&(a=(n?l(t,r,a):l(a))||a);return n&&a&&J(t,r,a),a};let i=class extends E{constructor(){super(...arguments),this.average=!0,this.min=!0,this.max=!0,this.iqr=!1,this.stdev=!1}formatStat(e){try{return this.formatter?this.formatter.format(e):e}catch{return e}}calculateStats(e,t){switch(t){case"average":return d(e);case"min":return F(e);case"max":return R(e);case"iqr":return I(e);case"stdev":return A(e);default:return null}}getValues(e,t){let r=t.reduce((n,a)=>(n[a]=Array.from(e.length).fill(void 0),n),{});for(let n=0;n<e.length;n++)for(const a of t){const o=e[n][a];typeof o=="number"&&!isNaN(o)&&o!==null&&(r[a][n]=o)}return r}getData(){var a;if(!((a=this.currentResults)!=null&&a.length))return{data:[],columns:[]};const e=[this.average&&"average",this.min&&"min",this.max&&"max",this.iqr&&"iqr",this.stdev&&"stdev"].filter(Boolean),t=this.columns||Object.keys(this.currentResults[0]),r=this.getValues(this.currentResults,t);return{data:t.map(o=>{const l=e.reduce((s,h)=>(s[h]=this.formatStat(this.calculateStats(r[o],h)),s),{});return{property:o.split("_").map(s=>s.charAt(0).toUpperCase()+s.slice(1)).join(" "),...l}}),columns:["property",...e]}}connectedCallback(){super.connectedCallback(),this.labelFormat&&(this.formatter=N(this.labelFormat))}template(){const{data:e,columns:t}=this.getData();return S`
      <osl-table
        .data=${e}
        .columns=${t}
        .title=${this.title}
      ></osl-table>
    `}};f([c({converter:_})],i.prototype,"columns",2);f([c({type:Boolean})],i.prototype,"average",2);f([c({type:Boolean})],i.prototype,"min",2);f([c({type:Boolean})],i.prototype,"max",2);f([c({type:Boolean})],i.prototype,"iqr",2);f([c({type:Boolean})],i.prototype,"stdev",2);i=f([D("osl-stat-table")],i);
//# sourceMappingURL=StatTable-b6379de0.js.map
