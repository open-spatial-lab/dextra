import{r as It}from"./reparent-children-b157c91e.js";import{f as zt}from"./first-focusable-in-7a384f7f.js";import{i as Bt,x as yt}from"./lit-element-47511895.js";import{n as G}from"./safeCustomElement-f1504f3f.js";import{S as _t}from"./ValtioElement-af4c0565.js";import{l as tt}from"./if-defined-92735e40.js";const $t=Bt`
@keyframes sp-overlay-fade-in{0%{opacity:0;transform:var(--sp-overlay-from)}to{opacity:1;transform:translate(0)}}@keyframes sp-overlay-fade-out{0%{opacity:1;transform:translate(0)}to{opacity:0;transform:var(--sp-overlay-from)}}:host{display:inline-block;left:-9999em;max-height:100%;pointer-events:none;position:fixed;top:-9999em;z-index:1000}:host(:focus){outline:none}:host([placement=none]){height:100vh;height:100dvh;height:-webkit-fill-available;height:fill-available;left:0;position:fixed;top:0}#contents,sp-theme{height:100%}#contents{--swc-overlay-animation-distance:var(
--spectrum-picker-m-texticon-popover-offset-y,var(--spectrum-global-dimension-size-75)
);animation-duration:var(
--swc-test-duration,var(--spectrum-global-animation-duration-200,.16s)
);animation-timing-function:var(
--spectrum-global-animation-ease-out,ease-out
);box-sizing:border-box;display:inline-block;opacity:1;pointer-events:none;visibility:visible}:host([actual-placement*=top]) #contents{--sp-overlay-from:translateY(var(--spectrum-global-dimension-size-75));align-items:flex-end;display:inline-flex;padding-top:var(--swc-overlay-animation-distance)}:host([actual-placement*=right]) #contents{--sp-overlay-from:translateX(calc(var(--spectrum-global-dimension-size-75)*-1));padding-right:var(--swc-overlay-animation-distance)}:host([actual-placement*=bottom]) #contents{--sp-overlay-from:translateY(calc(var(--spectrum-global-dimension-size-75)*-1));padding-bottom:var(--swc-overlay-animation-distance)}:host([actual-placement*=left]) #contents{--sp-overlay-from:translateX(var(--spectrum-global-dimension-size-75));padding-left:var(--swc-overlay-animation-distance)}:host([animating]) ::slotted(*){pointer-events:none}:host(:not([animating])) ::slotted(*){pointer-events:auto}#contents ::slotted(*){position:relative}
`,Vt=$t,j=e=>{if(!e)return null;const t=e.closest("active-overlay");if(t)return t;const n=e.getRootNode();return n.host?j(n.host):null},ct=(e,t)=>{const n=[];if(!e)return[];for(const o of t)o.root&&j(o.root)===e&&(n.push(o),n.push(...ct(o,t)));return n},N=Math.min,T=Math.max,ot=Math.round,et=Math.floor,H=e=>({x:e,y:e}),jt={left:"right",right:"left",bottom:"top",top:"bottom"},Kt={start:"end",end:"start"};function ht(e,t,n){return T(e,N(t,n))}function q(e,t){return typeof e=="function"?e(t):e}function I(e){return e.split("-")[0]}function U(e){return e.split("-")[1]}function Rt(e){return e==="x"?"y":"x"}function ut(e){return e==="y"?"height":"width"}function Q(e){return["top","bottom"].includes(I(e))?"y":"x"}function ft(e){return Rt(Q(e))}function qt(e,t,n){n===void 0&&(n=!1);const o=U(e),i=ft(e),r=ut(i);let s=i==="x"?o===(n?"end":"start")?"right":"left":o==="start"?"bottom":"top";return t.reference[r]>t.floating[r]&&(s=it(s)),[s,it(s)]}function Ut(e){const t=it(e);return[dt(e),t,dt(t)]}function dt(e){return e.replace(/start|end/g,t=>Kt[t])}function Yt(e,t,n){const o=["left","right"],i=["right","left"],r=["top","bottom"],s=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:o:t?o:i;case"left":case"right":return t?r:s;default:return[]}}function Xt(e,t,n,o){const i=U(e);let r=Yt(I(e),n==="start",o);return i&&(r=r.map(s=>s+"-"+i),t&&(r=r.concat(r.map(dt)))),r}function it(e){return e.replace(/left|right|bottom|top/g,t=>jt[t])}function Gt(e){return{top:0,right:0,bottom:0,left:0,...e}}function Pt(e){return typeof e!="number"?Gt(e):{top:e,right:e,bottom:e,left:e}}function st(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}function bt(e,t,n){let{reference:o,floating:i}=e;const r=Q(t),s=ft(t),l=ut(s),a=I(t),c=r==="y",d=o.x+o.width/2-i.width/2,u=o.y+o.height/2-i.height/2,f=o[l]/2-i[l]/2;let h;switch(a){case"top":h={x:d,y:o.y-i.height};break;case"bottom":h={x:d,y:o.y+o.height};break;case"right":h={x:o.x+o.width,y:u};break;case"left":h={x:o.x-i.width,y:u};break;default:h={x:o.x,y:o.y}}switch(U(t)){case"start":h[s]-=f*(n&&c?-1:1);break;case"end":h[s]+=f*(n&&c?-1:1);break}return h}const Jt=async(e,t,n)=>{const{placement:o="bottom",strategy:i="absolute",middleware:r=[],platform:s}=n,l=r.filter(Boolean),a=await(s.isRTL==null?void 0:s.isRTL(t));let c=await s.getElementRects({reference:e,floating:t,strategy:i}),{x:d,y:u}=bt(c,o,a),f=o,h={},m=0;for(let g=0;g<l.length;g++){const{name:y,fn:p}=l[g],{x:v,y:w,data:C,reset:b}=await p({x:d,y:u,initialPlacement:o,placement:f,strategy:i,middlewareData:h,rects:c,platform:s,elements:{reference:e,floating:t}});if(d=v??d,u=w??u,h={...h,[y]:{...h[y],...C}},b&&m<=50){m++,typeof b=="object"&&(b.placement&&(f=b.placement),b.rects&&(c=b.rects===!0?await s.getElementRects({reference:e,floating:t,strategy:i}):b.rects),{x:d,y:u}=bt(c,f,a)),g=-1;continue}}return{x:d,y:u,placement:f,strategy:i,middlewareData:h}};async function mt(e,t){var n;t===void 0&&(t={});const{x:o,y:i,platform:r,rects:s,elements:l,strategy:a}=e,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:u="floating",altBoundary:f=!1,padding:h=0}=q(t,e),m=Pt(h),y=l[f?u==="floating"?"reference":"floating":u],p=st(await r.getClippingRect({element:(n=await(r.isElement==null?void 0:r.isElement(y)))==null||n?y:y.contextElement||await(r.getDocumentElement==null?void 0:r.getDocumentElement(l.floating)),boundary:c,rootBoundary:d,strategy:a})),v=u==="floating"?{...s.floating,x:o,y:i}:s.reference,w=await(r.getOffsetParent==null?void 0:r.getOffsetParent(l.floating)),C=await(r.isElement==null?void 0:r.isElement(w))?await(r.getScale==null?void 0:r.getScale(w))||{x:1,y:1}:{x:1,y:1},b=st(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({rect:v,offsetParent:w,strategy:a}):v);return{top:(p.top-b.top+m.top)/C.y,bottom:(b.bottom-p.bottom+m.bottom)/C.y,left:(p.left-b.left+m.left)/C.x,right:(b.right-p.right+m.right)/C.x}}const Qt=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:o,placement:i,rects:r,platform:s,elements:l}=t,{element:a,padding:c=0}=q(e,t)||{};if(a==null)return{};const d=Pt(c),u={x:n,y:o},f=ft(i),h=ut(f),m=await s.getDimensions(a),g=f==="y",y=g?"top":"left",p=g?"bottom":"right",v=g?"clientHeight":"clientWidth",w=r.reference[h]+r.reference[f]-u[f]-r.floating[h],C=u[f]-r.reference[f],b=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a));let x=b?b[v]:0;(!x||!await(s.isElement==null?void 0:s.isElement(b)))&&(x=l.floating[v]||r.floating[h]);const P=w/2-C/2,M=x/2-m[h]/2-1,D=N(d[y],M),Y=N(d[p],M),E=D,X=x-m[h]-Y,O=x/2-m[h]/2+P,k=ht(E,O,X),W=U(i)!=null&&O!=k&&r.reference[h]/2-(O<E?D:Y)-m[h]/2<0?O<E?E-O:X-O:0;return{[f]:u[f]-W,data:{[f]:k,centerOffset:O-k+W}}}}),wt=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n;const{placement:o,middlewareData:i,rects:r,initialPlacement:s,platform:l,elements:a}=t,{mainAxis:c=!0,crossAxis:d=!0,fallbackPlacements:u,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:h="none",flipAlignment:m=!0,...g}=q(e,t),y=I(o),p=I(s)===s,v=await(l.isRTL==null?void 0:l.isRTL(a.floating)),w=u||(p||!m?[it(s)]:Ut(s));!u&&h!=="none"&&w.push(...Xt(s,m,h,v));const C=[s,...w],b=await mt(t,g),x=[];let P=((n=i.flip)==null?void 0:n.overflows)||[];if(c&&x.push(b[y]),d){const E=qt(o,r,v);x.push(b[E[0]],b[E[1]])}if(P=[...P,{placement:o,overflows:x}],!x.every(E=>E<=0)){var M,D;const E=(((M=i.flip)==null?void 0:M.index)||0)+1,X=C[E];if(X)return{data:{index:E,overflows:P},reset:{placement:X}};let O=(D=P.filter(k=>k.overflows[0]<=0).sort((k,B)=>k.overflows[1]-B.overflows[1])[0])==null?void 0:D.placement;if(!O)switch(f){case"bestFit":{var Y;const k=(Y=P.map(B=>[B.placement,B.overflows.filter(W=>W>0).reduce((W,Ht)=>W+Ht,0)]).sort((B,W)=>B[1]-W[1])[0])==null?void 0:Y[0];k&&(O=k);break}case"initialPlacement":O=s;break}if(o!==O)return{reset:{placement:O}}}return{}}}};async function Zt(e,t){const{placement:n,platform:o,elements:i}=e,r=await(o.isRTL==null?void 0:o.isRTL(i.floating)),s=I(n),l=U(n),a=Q(n)==="y",c=["left","top"].includes(s)?-1:1,d=r&&a?-1:1,u=q(t,e);let{mainAxis:f,crossAxis:h,alignmentAxis:m}=typeof u=="number"?{mainAxis:u,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...u};return l&&typeof m=="number"&&(h=l==="end"?m*-1:m),a?{x:h*d,y:f*c}:{x:f*c,y:h*d}}const te=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){const{x:n,y:o}=t,i=await Zt(t,e);return{x:n+i.x,y:o+i.y,data:i}}}},ee=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:o,placement:i}=t,{mainAxis:r=!0,crossAxis:s=!1,limiter:l={fn:y=>{let{x:p,y:v}=y;return{x:p,y:v}}},...a}=q(e,t),c={x:n,y:o},d=await mt(t,a),u=Q(I(i)),f=Rt(u);let h=c[f],m=c[u];if(r){const y=f==="y"?"top":"left",p=f==="y"?"bottom":"right",v=h+d[y],w=h-d[p];h=ht(v,h,w)}if(s){const y=u==="y"?"top":"left",p=u==="y"?"bottom":"right",v=m+d[y],w=m-d[p];m=ht(v,m,w)}const g=l.fn({...t,[f]:h,[u]:m});return{...g,data:{x:g.x-n,y:g.y-o}}}}},ne=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:o,platform:i,elements:r}=t,{apply:s=()=>{},...l}=q(e,t),a=await mt(t,l),c=I(n),d=U(n),u=Q(n)==="y",{width:f,height:h}=o.floating;let m,g;c==="top"||c==="bottom"?(m=c,g=d===(await(i.isRTL==null?void 0:i.isRTL(r.floating))?"start":"end")?"left":"right"):(g=c,m=d==="end"?"top":"bottom");const y=h-a[m],p=f-a[g],v=!t.middlewareData.shift;let w=y,C=p;if(u){const x=f-a.left-a.right;C=d||v?N(p,x):x}else{const x=h-a.top-a.bottom;w=d||v?N(y,x):x}if(v&&!d){const x=T(a.left,0),P=T(a.right,0),M=T(a.top,0),D=T(a.bottom,0);u?C=f-2*(x!==0||P!==0?x+P:T(a.left,a.right)):w=h-2*(M!==0||D!==0?M+D:T(a.top,a.bottom))}await s({...t,availableWidth:C,availableHeight:w});const b=await i.getDimensions(r.floating);return f!==b.width||h!==b.height?{reset:{rects:!0}}:{}}}};function z(e){return kt(e)?(e.nodeName||"").toLowerCase():"#document"}function A(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function S(e){var t;return(t=(kt(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function kt(e){return e instanceof Node||e instanceof A(e).Node}function F(e){return e instanceof Element||e instanceof A(e).Element}function L(e){return e instanceof HTMLElement||e instanceof A(e).HTMLElement}function xt(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof A(e).ShadowRoot}function Z(e){const{overflow:t,overflowX:n,overflowY:o,display:i}=R(e);return/auto|scroll|overlay|hidden|clip/.test(t+o+n)&&!["inline","contents"].includes(i)}function oe(e){return["table","td","th"].includes(z(e))}function pt(e){const t=gt(),n=R(e);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(o=>(n.willChange||"").includes(o))||["paint","layout","strict","content"].some(o=>(n.contain||"").includes(o))}function ie(e){let t=K(e);for(;L(t)&&!at(t);){if(pt(t))return t;t=K(t)}return null}function gt(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function at(e){return["html","body","#document"].includes(z(e))}function R(e){return A(e).getComputedStyle(e)}function lt(e){return F(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function K(e){if(z(e)==="html")return e;const t=e.assignedSlot||e.parentNode||xt(e)&&e.host||S(e);return xt(t)?t.host:t}function Lt(e){const t=K(e);return at(t)?e.ownerDocument?e.ownerDocument.body:e.body:L(t)&&Z(t)?t:Lt(t)}function rt(e,t){var n;t===void 0&&(t=[]);const o=Lt(e),i=o===((n=e.ownerDocument)==null?void 0:n.body),r=A(o);return i?t.concat(r,r.visualViewport||[],Z(o)?o:[]):t.concat(o,rt(o))}function Ft(e){const t=R(e);let n=parseFloat(t.width)||0,o=parseFloat(t.height)||0;const i=L(e),r=i?e.offsetWidth:n,s=i?e.offsetHeight:o,l=ot(n)!==r||ot(o)!==s;return l&&(n=r,o=s),{width:n,height:o,$:l}}function vt(e){return F(e)?e:e.contextElement}function V(e){const t=vt(e);if(!L(t))return H(1);const n=t.getBoundingClientRect(),{width:o,height:i,$:r}=Ft(t);let s=(r?ot(n.width):n.width)/o,l=(r?ot(n.height):n.height)/i;return(!s||!Number.isFinite(s))&&(s=1),(!l||!Number.isFinite(l))&&(l=1),{x:s,y:l}}const se=H(0);function St(e){const t=A(e);return!gt()||!t.visualViewport?se:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function re(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==A(e)?!1:t}function $(e,t,n,o){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),r=vt(e);let s=H(1);t&&(o?F(o)&&(s=V(o)):s=V(e));const l=re(r,n,o)?St(r):H(0);let a=(i.left+l.x)/s.x,c=(i.top+l.y)/s.y,d=i.width/s.x,u=i.height/s.y;if(r){const f=A(r),h=o&&F(o)?A(o):o;let m=f.frameElement;for(;m&&o&&h!==f;){const g=V(m),y=m.getBoundingClientRect(),p=R(m),v=y.left+(m.clientLeft+parseFloat(p.paddingLeft))*g.x,w=y.top+(m.clientTop+parseFloat(p.paddingTop))*g.y;a*=g.x,c*=g.y,d*=g.x,u*=g.y,a+=v,c+=w,m=A(m).frameElement}}return st({width:d,height:u,x:a,y:c})}function ae(e){let{rect:t,offsetParent:n,strategy:o}=e;const i=L(n),r=S(n);if(n===r)return t;let s={scrollLeft:0,scrollTop:0},l=H(1);const a=H(0);if((i||!i&&o!=="fixed")&&((z(n)!=="body"||Z(r))&&(s=lt(n)),L(n))){const c=$(n);l=V(n),a.x=c.x+n.clientLeft,a.y=c.y+n.clientTop}return{width:t.width*l.x,height:t.height*l.y,x:t.x*l.x-s.scrollLeft*l.x+a.x,y:t.y*l.y-s.scrollTop*l.y+a.y}}function le(e){return Array.from(e.getClientRects())}function Mt(e){return $(S(e)).left+lt(e).scrollLeft}function ce(e){const t=S(e),n=lt(e),o=e.ownerDocument.body,i=T(t.scrollWidth,t.clientWidth,o.scrollWidth,o.clientWidth),r=T(t.scrollHeight,t.clientHeight,o.scrollHeight,o.clientHeight);let s=-n.scrollLeft+Mt(e);const l=-n.scrollTop;return R(o).direction==="rtl"&&(s+=T(t.clientWidth,o.clientWidth)-i),{width:i,height:r,x:s,y:l}}function he(e,t){const n=A(e),o=S(e),i=n.visualViewport;let r=o.clientWidth,s=o.clientHeight,l=0,a=0;if(i){r=i.width,s=i.height;const c=gt();(!c||c&&t==="fixed")&&(l=i.offsetLeft,a=i.offsetTop)}return{width:r,height:s,x:l,y:a}}function de(e,t){const n=$(e,!0,t==="fixed"),o=n.top+e.clientTop,i=n.left+e.clientLeft,r=L(e)?V(e):H(1),s=e.clientWidth*r.x,l=e.clientHeight*r.y,a=i*r.x,c=o*r.y;return{width:s,height:l,x:a,y:c}}function Ct(e,t,n){let o;if(t==="viewport")o=he(e,n);else if(t==="document")o=ce(S(e));else if(F(t))o=de(t,n);else{const i=St(e);o={...t,x:t.x-i.x,y:t.y-i.y}}return st(o)}function Dt(e,t){const n=K(e);return n===t||!F(n)||at(n)?!1:R(n).position==="fixed"||Dt(n,t)}function ue(e,t){const n=t.get(e);if(n)return n;let o=rt(e).filter(l=>F(l)&&z(l)!=="body"),i=null;const r=R(e).position==="fixed";let s=r?K(e):e;for(;F(s)&&!at(s);){const l=R(s),a=pt(s);!a&&l.position==="fixed"&&(i=null),(r?!a&&!i:!a&&l.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||Z(s)&&!a&&Dt(e,s))?o=o.filter(d=>d!==s):i=l,s=K(s)}return t.set(e,o),o}function fe(e){let{element:t,boundary:n,rootBoundary:o,strategy:i}=e;const s=[...n==="clippingAncestors"?ue(t,this._c):[].concat(n),o],l=s[0],a=s.reduce((c,d)=>{const u=Ct(t,d,i);return c.top=T(u.top,c.top),c.right=N(u.right,c.right),c.bottom=N(u.bottom,c.bottom),c.left=T(u.left,c.left),c},Ct(t,l,i));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}}function me(e){return Ft(e)}function pe(e,t,n){const o=L(t),i=S(t),r=n==="fixed",s=$(e,!0,r,t);let l={scrollLeft:0,scrollTop:0};const a=H(0);if(o||!o&&!r)if((z(t)!=="body"||Z(i))&&(l=lt(t)),o){const c=$(t,!0,r,t);a.x=c.x+t.clientLeft,a.y=c.y+t.clientTop}else i&&(a.x=Mt(i));return{x:s.left+l.scrollLeft-a.x,y:s.top+l.scrollTop-a.y,width:s.width,height:s.height}}function Ot(e,t){return!L(e)||R(e).position==="fixed"?null:t?t(e):e.offsetParent}function Wt(e,t){const n=A(e);if(!L(e))return n;let o=Ot(e,t);for(;o&&oe(o)&&R(o).position==="static";)o=Ot(o,t);return o&&(z(o)==="html"||z(o)==="body"&&R(o).position==="static"&&!pt(o))?n:o||ie(e)||n}const ge=async function(e){let{reference:t,floating:n,strategy:o}=e;const i=this.getOffsetParent||Wt,r=this.getDimensions;return{reference:pe(t,await i(n),o),floating:{x:0,y:0,...await r(n)}}};function ve(e){return R(e).direction==="rtl"}const ye={convertOffsetParentRelativeRectToViewportRelativeRect:ae,getDocumentElement:S,getClippingRect:fe,getOffsetParent:Wt,getElementRects:ge,getClientRects:le,getDimensions:me,getScale:V,isElement:F,isRTL:ve};function be(e,t){let n=null,o;const i=S(e);function r(){clearTimeout(o),n&&n.disconnect(),n=null}function s(l,a){l===void 0&&(l=!1),a===void 0&&(a=1),r();const{left:c,top:d,width:u,height:f}=e.getBoundingClientRect();if(l||t(),!u||!f)return;const h=et(d),m=et(i.clientWidth-(c+u)),g=et(i.clientHeight-(d+f)),y=et(c),v={rootMargin:-h+"px "+-m+"px "+-g+"px "+-y+"px",threshold:T(0,N(1,a))||1};let w=!0;function C(b){const x=b[0].intersectionRatio;if(x!==a){if(!w)return s();x?s(!1,x):o=setTimeout(()=>{s(!1,1e-7)},100)}w=!1}try{n=new IntersectionObserver(C,{...v,root:i.ownerDocument})}catch{n=new IntersectionObserver(C,v)}n.observe(e)}return s(!0),r}function we(e,t,n,o){o===void 0&&(o={});const{ancestorScroll:i=!0,ancestorResize:r=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:a=!1}=o,c=vt(e),d=i||r?[...c?rt(c):[],...rt(t)]:[];d.forEach(p=>{i&&p.addEventListener("scroll",n,{passive:!0}),r&&p.addEventListener("resize",n)});const u=c&&l?be(c,n):null;let f=-1,h=null;s&&(h=new ResizeObserver(p=>{let[v]=p;v&&v.target===c&&h&&(h.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{h&&h.observe(t)})),n()}),c&&!a&&h.observe(c),h.observe(t));let m,g=a?$(e):null;a&&y();function y(){const p=$(e);g&&(p.x!==g.x||p.y!==g.y||p.width!==g.width||p.height!==g.height)&&n(),g=p,m=requestAnimationFrame(y)}return n(),()=>{d.forEach(p=>{i&&p.removeEventListener("scroll",n),r&&p.removeEventListener("resize",n)}),u&&u(),h&&h.disconnect(),h=null,a&&cancelAnimationFrame(m)}}const xe=(e,t,n)=>{const o=new Map,i={platform:ye,...n},r={...i.platform,_c:o};return Jt(e,t,{...i,platform:r})};var Ce=Object.defineProperty,Oe=Object.getOwnPropertyDescriptor,J=(e,t,n,o)=>{for(var i=o>1?void 0:o?Oe(t,n):t,r=e.length-1,s;r>=0;r--)(s=e[r])&&(i=(o?s(t,n,i):s(i))||i);return o&&i&&Ce(t,n,i),i};const Tt={initial:"idle",states:{idle:{on:{active:"active"}},active:{on:{hiding:"hiding",idle:"idle"}},hiding:{on:{dispose:"dispose"}},dispose:{on:{disposed:"disposed"}},disposed:{on:{}}}},At=(e,t)=>e?t&&Tt.states[e].on[t]||e:Tt.initial,Te=e=>{var t;return(t={left:["right","bottom","top"],"left-start":["right-start","bottom","top"],"left-end":["right-end","bottom","top"],right:["left","bottom","top"],"right-start":["left-start","bottom","top"],"right-end":["left-end","bottom","top"],top:["bottom","left","right"],"top-start":["bottom-start","left","right"],"top-end":["bottom-end","left","right"],bottom:["top","left","right"],"bottom-start":["top-start","left","right"],"bottom-end":["top-end","left","right"]}[e])!=null?t:[e]},Nt=class extends _t{constructor(){super(),this.contentAnimationPromise=Promise.resolve(!0),this.resolveContentAnimationPromise=()=>{},this._state=At(),this.animating=!1,this.theme={},this.tabbingAway=!1,this.offset=6,this.skidding=0,this.interaction="hover",this.positionAnimationFrame=0,this.willNotifyClosed=!1,this.isConstrained=!1,this.updateOverlayPosition=()=>{if(this.interaction!=="modal"&&this.cleanup){this.dispatchEvent(new Event("close"));return}this.setOverlayPosition()},this.resetOverlayPosition=()=>{this.style.removeProperty("max-height"),this.style.removeProperty("height"),this.initialHeight=void 0,this.isConstrained=!1,this.offsetHeight,this.setOverlayPosition()},this.setOverlayPosition=async()=>{if(!this.placement||this.placement==="none")return;await(document.fonts?document.fonts.ready:Promise.resolve());function e(c){const d=window.devicePixelRatio||1;return Math.round(c*d)/d||-1e4}const t=8,n=100,o=this.virtualTrigger?wt({padding:t,fallbackPlacements:Te(this.placement)}):wt({padding:t}),i=[te({mainAxis:this.offset,crossAxis:this.skidding}),ee({padding:t}),o,ne({padding:t,apply:({availableWidth:c,availableHeight:d,rects:{floating:u}})=>{const f=Math.max(n,Math.floor(d)),h=u.height;this.initialHeight=!this.isConstrained&&!this.virtualTrigger?h:this.initialHeight||h,this.isConstrained=h<this.initialHeight||f<=h;const m=this.isConstrained?`${f}px`:"";Object.assign(this.style,{maxWidth:`${Math.floor(c)}px`,maxHeight:m,height:m})}})];this.overlayContentTip&&i.push(Qt({element:this.overlayContentTip}));const{x:r,y:s,placement:l,middlewareData:a}=await xe(this.virtualTrigger||this.trigger,this,{placement:this.placement,middleware:i,strategy:"fixed"});if(Object.assign(this.style,{top:"0px",left:"0px",transform:`translate(${e(r)}px, ${e(s)}px)`}),l!==this.getAttribute("actual-placement")&&(this.setAttribute("actual-placement",l),this.overlayContent.setAttribute("placement",l)),this.overlayContentTip&&a.arrow){const{x:c,y:d}=a.arrow;Object.assign(this.overlayContentTip.style,{left:c!=null?`${e(c)}px`:"",top:d!=null?`${e(d)}px`:"",right:"",bottom:""})}},this.handleInlineTriggerKeydown=e=>{const{code:t,shiftKey:n}=e;if(t==="Tab"){if(n){this.tabbingAway=!0,this.dispatchEvent(new Event("close"));return}e.stopPropagation(),e.preventDefault(),this.focus()}},this.stealOverlayContentPromise=Promise.resolve(),this.stealOverlayContentPromise=new Promise(e=>this.stealOverlayContentResolver=e)}get state(){return this._state}set state(e){const t=At(this.state,e);t!==this.state&&(this._state=t,this.state==="active"||this.state==="hiding"?this.setAttribute("state",this.state):this.removeAttribute("state"))}async focus(){const e=zt(this);if(e){e.updateComplete&&await e.updateComplete;const t=this.getRootNode().activeElement;(t===this||!this.contains(t))&&e.focus()}else super.focus();this.removeAttribute("tabindex")}get hasTheme(){return!!this.theme.color||!!this.theme.scale||!!this.theme.lang}static get styles(){return[Vt]}get hasModalRoot(){return!!this._modalRoot}feature(){this.contains(document.activeElement)||(this.tabIndex=-1);const e=j(this.trigger);e&&e.slot==="open"&&(this._modalRoot=e._modalRoot||e),(this.interaction==="modal"||this._modalRoot)&&(this.slot="open",this.interaction==="modal"&&this.setAttribute("aria-modal","true"),this._modalRoot&&(e==null||e.feature()))}obscure(e){if(this.slot&&e==="modal"){if(this.removeAttribute("slot"),this.removeAttribute("aria-modal"),this.interaction!=="modal"){const t=j(this.trigger);return this._modalRoot=t==null?void 0:t.obscure(e),this._modalRoot}return this}}async willUpdate(){this.hasUpdated||!this.overlayContent||!this.trigger||(this.stealOverlayContent(this.overlayContent),this.state="active",this.feature(),this.placement&&this.placement!=="none"&&(await this.updateOverlayPosition(),document.addEventListener("sp-update-overlays",this.resetOverlayPosition)),this.placement&&this.placement!=="none"&&(this.contentAnimationPromise=this.applyContentAnimation("sp-overlay-fade-in")))}async openCallback(e){await this.updateComplete,this.receivesFocus&&await this.focus(),await e(),this.trigger.dispatchEvent(new CustomEvent("sp-opened",{bubbles:!0,composed:!0,cancelable:!0,detail:{interaction:this.interaction}}))}open(e){this.extractDetail(e)}extractDetail(e){this.overlayContent=e.content,this.overlayContentTip=e.contentTip,this.trigger=e.trigger,this.virtualTrigger=e.virtualTrigger,this.placement=e.placement,this.offset=e.offset,this.skidding=e.skidding||0,this.interaction=e.interaction,this.theme=e.theme,this.receivesFocus=e.receivesFocus,this.root=e.root}dispose(){this.state==="dispose"&&(this.timeout&&(clearTimeout(this.timeout),delete this.timeout),this.trigger.removeEventListener("keydown",this.handleInlineTriggerKeydown),this.returnOverlayContent(),this.state="disposed",this.willNotifyClosed&&(this.overlayContent.dispatchEvent(new Event("sp-overlay-closed")),this.willNotifyClosed=!1),this.cleanup&&this.cleanup())}stealOverlayContent(e){this.originalPlacement=e.getAttribute("placement"),this.restoreContent=It([e],this,{position:"beforeend",prepareCallback:t=>{const n=t.slot,o=t.placement;return t.removeAttribute("slot"),i=>{i.slot=n,i.placement=o}}}),this.stealOverlayContentResolver()}returnOverlayContent(){if(!this.restoreContent)return;const[e]=this.restoreContent();this.restoreContent=void 0,this.willNotifyClosed=!0,this.originalPlacement&&(e.setAttribute("placement",this.originalPlacement),delete this.originalPlacement)}async placeOverlay(){!this.placement||this.placement==="none"||(this.cleanup=we(this.virtualTrigger||this.trigger,this,this.updateOverlayPosition,{elementResize:!1}))}async hide(e=!0){this.state==="active"&&(this.state="hiding",e&&await this.applyContentAnimation("sp-overlay-fade-out"),this.state="dispose")}schedulePositionUpdate(){cancelAnimationFrame(this.positionAnimationFrame),this.positionAnimationFrame=requestAnimationFrame(()=>{this.cleanup?this.updateOverlayPosition():this.placeOverlay()})}onSlotChange(){this.schedulePositionUpdate()}applyContentAnimation(e){return this.placement==="none"?Promise.resolve(!0):(this.resolveContentAnimationPromise(),new Promise(t=>{this.resolveContentAnimationPromise=()=>{t(!1)};const n=this.shadowRoot.querySelector("#contents"),o=i=>{e===i.animationName&&(n.removeEventListener("animationend",o),n.removeEventListener("animationcancel",o),this.animating=!1,t(i.type==="animationcancel"))};n.addEventListener("animationend",o),n.addEventListener("animationcancel",o),n.style.animationName=e,this.animating=!0}))}renderTheme(e){const{color:t,scale:n,lang:o,theme:i}=this.theme;return yt`
            <sp-theme
                theme=${tt(i)}
                color=${tt(t)}
                scale=${tt(n)}
                lang=${tt(o)}
                part="theme"
            >
                ${e}
            </sp-theme>
        `}render(){const e=yt`
            <div id="contents">
                <slot @slotchange=${this.onSlotChange}></slot>
            </div>
        `;return this.hasTheme?this.renderTheme(e):e}static create(e){const t=new Nt;return e.content&&t.open(e),t}async getUpdateComplete(){const e=[super.getUpdateComplete(),this.stealOverlayContentPromise];e.push(this.contentAnimationPromise),typeof this.overlayContent.updateComplete<"u"&&e.push(this.overlayContent.updateComplete);const[t]=await Promise.all(e);return t}disconnectedCallback(){document.removeEventListener("sp-update-overlays",this.resetOverlayPosition),super.disconnectedCallback()}};let _=Nt;J([G()],_.prototype,"_state",2),J([G({reflect:!0,type:Boolean})],_.prototype,"animating",2),J([G({reflect:!0})],_.prototype,"placement",2),J([G({attribute:!1})],_.prototype,"theme",2),J([G({attribute:!1})],_.prototype,"receivesFocus",2);class Ae{constructor(t={}){this.warmUpDelay=1e3,this.coolDownDelay=1e3,this.isWarm=!1,this.timeout=0,Object.assign(this,t)}async openTimer(t){if(this.cancelCooldownTimer(),!this.component||t!==this.component)return this.component&&(this.close(this.component),this.cancelCooldownTimer()),this.component=t,this.isWarm?!1:(this.promise=new Promise(n=>{this.resolve=n,this.timeout=window.setTimeout(()=>{this.resolve&&(this.resolve(!1),this.isWarm=!0)},this.warmUpDelay)}),this.promise);if(this.promise)return this.promise;throw new Error("Inconsistent state")}close(t){this.component&&this.component===t&&(this.resetCooldownTimer(),this.timeout>0&&(clearTimeout(this.timeout),this.timeout=0),this.resolve&&(this.resolve(!0),delete this.resolve),delete this.promise,delete this.component)}resetCooldownTimer(){this.isWarm&&(this.cooldownTimeout&&window.clearTimeout(this.cooldownTimeout),this.cooldownTimeout=window.setTimeout(()=>{this.isWarm=!1,delete this.cooldownTimeout},this.coolDownDelay))}cancelCooldownTimer(){this.cooldownTimeout&&window.clearTimeout(this.cooldownTimeout),delete this.cooldownTimeout}}customElements.define("active-overlay",_);const Ee=(e,t)=>{let n=document.elementFromPoint(e,t);for(;n!=null&&n.shadowRoot;){const o=n.shadowRoot.elementFromPoint(e,t);if(!o||o===n)break;n=o}return n};function Re(e){return e.button===0}function Pe(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Et(){return new Promise(e=>requestAnimationFrame(()=>e()))}class ke{constructor(){this.overlays=[],this.preventMouseRootClose=!1,this.root=document.body,this.handlingResize=!1,this.overlayTimer=new Ae,this.canTabTrap=!0,this.trappingInited=!1,this._eventsAreBound=!1,this._bodyMarginsApplied=!1,this.forwardContextmenuEvent=async t=>{var n;const o=this.overlays[this.overlays.length-1];!this.trappingInited||o.interaction!=="modal"||t.target!==this.overlayHolder||(t.stopPropagation(),t.preventDefault(),await this.closeTopOverlay(),(n=Ee(t.clientX,t.clientY))==null||n.dispatchEvent(new MouseEvent("contextmenu",t)))},this.handleOverlayClose=t=>{const{root:n}=t;n&&this.closeOverlaysForRoot(n)},this.handleMouseCapture=t=>{const n=this.topOverlay;if(!t.target||!n||!n.overlayContent||Pe(t)||!Re(t)){this.preventMouseRootClose=!0;return}if(t.target instanceof Node){if(t.composedPath().indexOf(n.overlayContent)>=0){this.preventMouseRootClose=!0;return}this.preventMouseRootClose=!1}},this._doesNotCloseOnFirstClick=!1,this.handleMouse=t=>{var n;if(this._doesNotCloseOnFirstClick){this._doesNotCloseOnFirstClick=!1;return}if(this.preventMouseRootClose||t.defaultPrevented)return;const o=[];let i=this.overlays.length;for(;i&&o.length===0;){i-=1;const l=this.overlays[i],a=t.composedPath();(!a.includes(l.trigger)||l.interaction!=="hover")&&!a.includes(l.overlayContent)&&o.push(l)}let r=(n=this.topOverlay)==null?void 0:n.root,s=j(r);for(;r&&s;)o.push(s),s=j(r),r=s==null?void 0:s.root;s&&o.push(s),o.forEach(l=>this.hideAndCloseOverlay(l))},this.handleKeydown=t=>{t.code==="Escape"&&this.closeTopOverlay()},this.handleResize=()=>{this.handlingResize||(this.handlingResize=!0,requestAnimationFrame(async()=>{const t=this.overlays.map(n=>n.updateOverlayPosition());await Promise.all(t),this.handlingResize=!1}))},this.initTabTrapping()}initTabTrapping(){if(document.readyState==="loading"){document.addEventListener("readystatechange",()=>{this.initTabTrapping()},{once:!0});return}if(this.trappingInited)return;if(this.trappingInited=!0,this.document.body.shadowRoot){this.canTabTrap=!1;return}if(this.document.body.attachShadow({mode:"open"}),!this.document.body.shadowRoot)return;const t=this.document.body.shadowRoot;t.innerHTML=`
            <style>
            :host {
                position: relative;
            }
            #actual {
                position: relative;
                height: calc(100% - var(--swc-body-margins-block, 0px));
                z-index: 0;
                min-height: calc(100vh - var(--swc-body-margins-block, 0px));
            }
            #holder {
                display: none;
                align-items: center;
                justify-content: center;
                flex-flow: column;
                width: 100%;
                height: 100%;
                position: absolute;
                top: 0;
                left: 0;
            }
            [name="open"]::slotted(*) {
                pointer-events: all;
            }
            #actual[aria-hidden] + #holder {
                display: flex;
            }
            </style>
            <div id="actual"><slot></slot></div>
            <div id="holder"><slot name="open"></slot></div>
        `,this.tabTrapper=t.querySelector("#actual"),this.overlayHolder=t.querySelector("#holder"),this.tabTrapper.attachShadow({mode:"open"}),this.tabTrapper.shadowRoot&&(this.tabTrapper.shadowRoot.innerHTML="<slot></slot>"),this.overlayHolder.addEventListener("contextmenu",this.forwardContextmenuEvent,!0),requestAnimationFrame(()=>{this.applyBodyMargins(),new ResizeObserver(()=>{this.applyBodyMargins()}).observe(document.body)})}applyBodyMargins(){const{marginLeft:t,marginRight:n,marginTop:o,marginBottom:i}=getComputedStyle(document.body),r=parseFloat(t)===0&&parseFloat(n)===0&&parseFloat(o)===0&&parseFloat(i)===0;r&&!this._bodyMarginsApplied||(this.tabTrapper.style.setProperty("--swc-body-margins-inline",`calc(${t} + ${n})`),this.tabTrapper.style.setProperty("--swc-body-margins-block",`calc(${o} + ${i})`),this._bodyMarginsApplied=!r)}startTabTrapping(){this.initTabTrapping(),this.canTabTrap&&(this.tabTrapper.tabIndex=-1,this.tabTrapper.setAttribute("aria-hidden","true"))}stopTabTrapping(){!this.canTabTrap||!this.trappingInited||(this.tabTrapper.removeAttribute("tabindex"),this.tabTrapper.removeAttribute("aria-hidden"))}get document(){return this.root.ownerDocument||document}get topOverlay(){return this.overlays.slice(-1)[0]}findOverlayForContent(t){for(const n of this.overlays)if(t===n.overlayContent)return n}addEventListeners(){this._eventsAreBound||(this._eventsAreBound=!0,this.document.addEventListener("click",this.handleMouseCapture,!0),this.document.addEventListener("click",this.handleMouse),this.document.addEventListener("keydown",this.handleKeydown),this.document.addEventListener("sp-overlay-close",this.handleOverlayClose),window.addEventListener("resize",this.handleResize))}isClickOverlayActiveForTrigger(t){return this.overlays.some(n=>t===n.trigger&&n.interaction==="click")}async openOverlay(t){if(this.addEventListeners(),this.findOverlayForContent(t.content))return!1;t.notImmediatelyClosable&&(this._doesNotCloseOnFirstClick=!0),t.interaction==="modal"&&this.startTabTrapping();const n=t.content,{trigger:o}=t;if(n.overlayWillOpenCallback&&n.overlayWillOpenCallback({trigger:o}),t.delayed){const s=[this.overlayTimer.openTimer(t.content)];t.abortPromise&&s.push(t.abortPromise);const l=await Promise.race(s);if(l)return n.overlayOpenCancelledCallback&&n.overlayOpenCancelledCallback({trigger:o}),l}if(t.root&&this.closeOverlaysForRoot(t.root),t.interaction==="click")this.closeAllHoverOverlays();else if(t.interaction==="hover"&&this.isClickOverlayActiveForTrigger(t.trigger))return!0;const i=_.create(t);this.overlays.length&&this.overlays[this.overlays.length-1].obscure(i.interaction),document.body.appendChild(i),await Et(),this.overlays.push(i),await i.updateComplete,this.addOverlayEventListeners(i),typeof n.open<"u"&&(await Et(),n.open=!0);let r=()=>{};if(n.overlayOpenCallback){const{trigger:s}=i,{overlayOpenCallback:l}=n;r=async()=>await l({trigger:s})}return await i.openCallback(r),!1}addOverlayEventListeners(t){switch(t.addEventListener("close",()=>{this.hideAndCloseOverlay(t,!0)}),t.interaction){case"replace":this.addReplaceOverlayEventListeners(t);break;case"inline":this.addInlineOverlayEventListeners(t);break}}addReplaceOverlayEventListeners(t){t.addEventListener("keydown",n=>{const{code:o}=n;o==="Tab"&&(n.stopPropagation(),this.closeOverlay(t.overlayContent),t.tabbingAway=!0,t.trigger.focus(),t.trigger.dispatchEvent(new KeyboardEvent("keydown",n)))})}addInlineOverlayEventListeners(t){t.trigger.addEventListener("keydown",t.handleInlineTriggerKeydown),t.addEventListener("keydown",n=>{const{code:o,shiftKey:i}=n;if(o!=="Tab")return;if(t.tabbingAway=!0,i){const s=document.createElement("span");s.tabIndex=-1,t.trigger.hasAttribute("slot")&&(s.slot=t.trigger.slot),t.trigger.insertAdjacentElement("afterend",s),s.focus(),s.remove();return}n.stopPropagation();const r=t.trigger;typeof r.open<"u"&&(r.open=!1),this.closeOverlay(t.overlayContent),t.trigger.focus()})}closeOverlay(t){this.overlayTimer.close(t),requestAnimationFrame(()=>{const n=this.findOverlayForContent(t),o=[n];o.push(...ct(n,this.overlays)),o.forEach(i=>this.hideAndCloseOverlay(i))})}closeAllHoverOverlays(){for(const t of this.overlays)t.interaction==="hover"&&this.hideAndCloseOverlay(t,!1)}closeOverlaysForRoot(t){const n=[];for(const o of this.overlays)o.root&&o.root===t&&(n.push(o),n.push(...ct(o,this.overlays)));n.forEach(o=>this.hideAndCloseOverlay(o,!0,!0))}async manageFocusAfterCloseWhenOverlaysRemain(t,n){const o=this.overlays[this.overlays.length-1];if(o.feature(),o.interaction==="modal"||o.hasModalRoot){if(t)return;await(n||o).focus()}else this.stopTabTrapping()}manageFocusAfterCloseWhenLastOverlay(t){this.stopTabTrapping();const n=t.interaction==="modal",o=t.receivesFocus==="auto",i=t.interaction==="replace",r=t.interaction==="inline",s=(i||r)&&!t.tabbingAway;if(t.tabbingAway=!1,!n&&!o&&!s)return;const l=t.overlayContent.getRootNode().activeElement;let a,c;const d=()=>t.overlayContent.contains(l),u=()=>(a=t.trigger.getRootNode(),c=a.activeElement,a.contains(c)),f=()=>a.host&&a.host===c;(n||d()||u()||f())&&t.trigger.focus()}async hideAndCloseOverlay(t,n,o){if(!t)return;const i=t.overlayContent;if(typeof i.overlayWillCloseCallback<"u"){const{trigger:s}=t;if(i.overlayWillCloseCallback({trigger:s}))return}if(await t.hide(n),typeof i.open<"u"&&(i.open=!1),i.overlayCloseCallback){const{trigger:s}=t;await i.overlayCloseCallback({trigger:s})}if(t.state!="dispose")return;const r=this.overlays.indexOf(t);r>=0&&this.overlays.splice(r,1),this.overlays.length?await this.manageFocusAfterCloseWhenOverlaysRemain(o||t.interaction==="hover",t.trigger):this.manageFocusAfterCloseWhenLastOverlay(t),await t.updateComplete,t.remove(),t.dispose(),t.trigger.dispatchEvent(new CustomEvent("sp-closed",{bubbles:!0,composed:!0,cancelable:!0,detail:{interaction:t.interaction}}))}closeTopOverlay(){return this.hideAndCloseOverlay(this.topOverlay,!0)}}const nt=class{constructor(e,t,n){this.isOpen=!1,this.owner=e,this.overlayElement=n,this.interaction=t}static async open(e,t,n,o){const i=new nt(e,t,n);return await i.open(o),()=>{i.close()}}static update(){const e=new CustomEvent("sp-update-overlays",{bubbles:!0,composed:!0,cancelable:!0});document.dispatchEvent(e)}async open({abortPromise:e,delayed:t,offset:n=0,placement:o="top",receivesFocus:i,notImmediatelyClosable:r,virtualTrigger:s,root:l}){if(this.isOpen)return!0;t===void 0&&(t=this.overlayElement.hasAttribute("delayed"));const a={color:void 0,scale:void 0,lang:void 0,theme:void 0},c=new CustomEvent("sp-query-theme",{bubbles:!0,composed:!0,detail:a,cancelable:!0});this.owner.dispatchEvent(c);const d={},u=new CustomEvent("sp-overlay-query",{bubbles:!0,composed:!0,detail:d,cancelable:!0});return this.overlayElement.dispatchEvent(u),await nt.overlayStack.openOverlay({abortPromise:e,content:this.overlayElement,contentTip:d.overlayContentTipElement,delayed:t,offset:n,placement:o,trigger:this.owner,interaction:this.interaction,theme:a,receivesFocus:i,root:l,notImmediatelyClosable:r,virtualTrigger:s,...d}),this.isOpen=!0,!0}close(){nt.overlayStack.closeOverlay(this.overlayElement)}};let Le=nt;Le.overlayStack=new ke;export{Le as Overlay};
//# sourceMappingURL=overlay-5b7fbe65.js.map
