import{s as h,n as y}from"./safeCustomElement-f1504f3f.js";import{P as v}from"./PlotMark-3b7eceed.js";import{i as g}from"./converters-40be0569.js";import{b as O,M as b,w as P,q as S,D as C,y as M,d as k,e as w,f as D,g as _,l as d,E as j}from"./Plot-e459c07e.js";import{w as G}from"./dot-04a474de.js";const L={ariaLabel:"geo",fill:"none",stroke:"currentColor",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class E extends b{constructor(r,t={}){const[o,s]=P(t.r,3);super(r,{geometry:{value:t.geometry,scale:"projection"},r:{value:o,scale:"r",filter:S,optional:!0}},G(t),L),this.r=s}render(r,t,o,s,n){const{geometry:i,r:f}=o,a=C(n.projection??F(t)),{r:p}=this;return M(p)?r=[]:p!==void 0&&a.pointRadius(p),k("svg:g",n).call(w,this,s,n).call(D,this,t).call(m=>{m.selectAll().data(r).enter().append("path").call(_,this).attr("d",f?l=>a.pointRadius(f[l])(i[l]):l=>a(i[l])).call(d,this,o)}).node()}}function F({x:e,y:r}){if(e||r)return e??(e=t=>t),r??(r=t=>t),j({point(t,o){this.stream.point(e(t),r(o))}})}function R(e,{geometry:r=O,...t}={}){switch(e==null?void 0:e.type){case"FeatureCollection":e=e.features;break;case"GeometryCollection":e=e.geometries;break;case"Feature":case"LineString":case"MultiLineString":case"MultiPoint":case"MultiPolygon":case"Point":case"Polygon":case"Sphere":e=[e];break}return new E(e,{geometry:r,...t})}var J=Object.defineProperty,N=Object.getOwnPropertyDescriptor,u=(e,r,t,o)=>{for(var s=o>1?void 0:o?N(r,t):r,n=e.length-1,i;n>=0;n--)(i=e[n])&&(s=(o?i(r,t,s):i(s))||s);return o&&s&&J(r,t,s),s};const T={type:"FeatureCollection",features:[]};let c=class extends v{constructor(){super(...arguments),this.mark="geo",this.markOptions=["geometry","r"],this.converters={fill:e=>typeof e=="function"?e:r=>this.getDeepValue(r,e.includes("properties")?e:`properties.${e}`)}}get plot(){const e=this==null?void 0:this.currentResults,r=this.allOptions;return(t,o)=>{const s=t||e,n=s!=null&&s.type?s:T;return R(n,{...o,...r})}}render(){return null}};u([y({converter:g})],c.prototype,"geometry",2);u([y({converter:g})],c.prototype,"r",2);c=u([h("osl-geo")],c);
//# sourceMappingURL=Geo-a7aaf6b9.js.map
