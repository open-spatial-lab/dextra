{"version":3,"file":"RovingTabindex-e989c6f6.js","sources":["../../node_modules/@spectrum-web-components/reactive-controllers/src/FocusGroup.js","../../node_modules/@spectrum-web-components/reactive-controllers/src/RovingTabindex.js"],"sourcesContent":["\"use strict\";function r(i,e,t){return typeof i===e?()=>i:typeof i==\"function\"?i:t}export class FocusGroupController{constructor(e,{direction:t,elementEnterAction:n,elements:s,focusInIndex:o,isFocusableElement:h,listenerScope:c}={elements:()=>[]}){this._currentIndex=-1;this._direction=()=>\"both\";this.directionLength=5;this.elementEnterAction=e=>{};this._focused=!1;this._focusInIndex=e=>0;this.isFocusableElement=e=>!0;this._listenerScope=()=>this.host;this.offset=0;this.handleFocusin=e=>{if(!this.isEventWithinListenerScope(e))return;this.isRelatedTargetAnElement(e)&&this.hostContainsFocus();const t=e.composedPath();let n=-1;t.find(s=>(n=this.elements.indexOf(s),n!==-1)),this.currentIndex=n>-1?n:this.currentIndex};this.handleFocusout=e=>{this.isRelatedTargetAnElement(e)&&this.hostNoLongerContainsFocus()};this.handleKeydown=e=>{if(!this.acceptsEventCode(e.code)||e.defaultPrevented)return;let t=0;switch(e.code){case\"ArrowRight\":t+=1;break;case\"ArrowDown\":t+=this.direction===\"grid\"?this.directionLength:1;break;case\"ArrowLeft\":t-=1;break;case\"ArrowUp\":t-=this.direction===\"grid\"?this.directionLength:1;break;case\"End\":this.currentIndex=0,t-=1;break;case\"Home\":this.currentIndex=this.elements.length-1,t+=1;break}e.preventDefault(),this.direction===\"grid\"&&this.currentIndex+t<0?this.currentIndex=0:this.direction===\"grid\"&&this.currentIndex+t>this.elements.length-1?this.currentIndex=this.elements.length-1:this.setCurrentIndexCircularly(t),this.elementEnterAction(this.elements[this.currentIndex]),this.focus()};this.host=e,this.host.addController(this),this._elements=s,this.isFocusableElement=h||this.isFocusableElement,this._direction=r(t,\"string\",this._direction),this.elementEnterAction=n||this.elementEnterAction,this._focusInIndex=r(o,\"number\",this._focusInIndex),this._listenerScope=r(c,\"object\",this._listenerScope)}get currentIndex(){return this._currentIndex===-1&&(this._currentIndex=this.focusInIndex),this._currentIndex-this.offset}set currentIndex(e){this._currentIndex=e+this.offset}get direction(){return this._direction()}get elements(){return this.cachedElements||(this.cachedElements=this._elements()),this.cachedElements}set focused(e){e!==this.focused&&(this._focused=e)}get focused(){return this._focused}get focusInElement(){return this.elements[this.focusInIndex]}get focusInIndex(){return this._focusInIndex(this.elements)}isEventWithinListenerScope(e){return this._listenerScope()===this.host?!0:e.composedPath().includes(this._listenerScope())}update({elements:e}={elements:()=>[]}){this.unmanage(),this._elements=e,this.clearElementCache(),this.manage()}focus(e){let t=this.elements[this.currentIndex];(!t||!this.isFocusableElement(t))&&(this.setCurrentIndexCircularly(1),t=this.elements[this.currentIndex]),t&&this.isFocusableElement(t)&&t.focus(e)}clearElementCache(e=0){delete this.cachedElements,this.offset=e}setCurrentIndexCircularly(e){const{length:t}=this.elements;let n=t,s=(t+this.currentIndex+e)%t;for(;n&&this.elements[s]&&!this.isFocusableElement(this.elements[s]);)s=(t+s+e)%t,n-=1;this.currentIndex=s}hostContainsFocus(){this.host.addEventListener(\"focusout\",this.handleFocusout),this.host.addEventListener(\"keydown\",this.handleKeydown),this.focused=!0}hostNoLongerContainsFocus(){this.host.addEventListener(\"focusin\",this.handleFocusin),this.host.removeEventListener(\"focusout\",this.handleFocusout),this.host.removeEventListener(\"keydown\",this.handleKeydown),this.currentIndex=this.focusInIndex,this.focused=!1}isRelatedTargetAnElement(e){const t=e.relatedTarget;return!this.elements.includes(t)}acceptsEventCode(e){if(e===\"End\"||e===\"Home\")return!0;switch(this.direction){case\"horizontal\":return e===\"ArrowLeft\"||e===\"ArrowRight\";case\"vertical\":return e===\"ArrowUp\"||e===\"ArrowDown\";case\"both\":case\"grid\":return e.startsWith(\"Arrow\")}}manage(){this.addEventListeners()}unmanage(){this.removeEventListeners()}addEventListeners(){this.host.addEventListener(\"focusin\",this.handleFocusin)}removeEventListeners(){this.host.removeEventListener(\"focusin\",this.handleFocusin),this.host.removeEventListener(\"focusout\",this.handleFocusout),this.host.removeEventListener(\"keydown\",this.handleKeydown)}hostConnected(){this.addEventListeners()}hostDisconnected(){this.removeEventListeners()}}\n//# sourceMappingURL=FocusGroup.js.map\n","\"use strict\";import{FocusGroupController as s}from\"./FocusGroup.js\";export class RovingTabindexController extends s{constructor(){super(...arguments);this.managed=!0;this.manageIndexesAnimationFrame=0}set focused(e){e!==this.focused&&(super.focused=e,this.manageTabindexes())}get focused(){return super.focused}clearElementCache(e=0){cancelAnimationFrame(this.manageIndexesAnimationFrame),super.clearElementCache(e),this.managed&&(this.manageIndexesAnimationFrame=requestAnimationFrame(()=>this.manageTabindexes()))}manageTabindexes(){this.focused?this.updateTabindexes(()=>({tabIndex:-1})):this.updateTabindexes(e=>({removeTabIndex:e.contains(this.focusInElement)&&e!==this.focusInElement,tabIndex:e===this.focusInElement?0:-1}))}updateTabindexes(e){this.elements.forEach(a=>{const{tabIndex:t,removeTabIndex:i}=e(a);if(!i){a.tabIndex=t;return}a.removeAttribute(\"tabindex\");const n=a;n.requestUpdate&&n.requestUpdate()})}manage(){this.managed=!0,this.manageTabindexes(),super.manage()}unmanage(){this.managed=!1,this.updateTabindexes(()=>({tabIndex:0})),super.unmanage()}hostUpdated(){this.host.hasUpdated||this.manageTabindexes()}}\n//# sourceMappingURL=RovingTabindex.js.map\n"],"names":["r","i","FocusGroupController","n","s","h","c","e","t","RovingTabindexController","a"],"mappings":"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","x_google_ignoreList":[0,1]}