import{am as N,an as b,ao as _,ap as H,aq as on,b as J,ar as cn,Z as P,as as Q,O as R,ah as an,K as fn,at as T,N as un,_ as mn,$ as A,au as ln,av as U,ag as X,aw as k,ax as yn,ay as C,az as gn,aA as K,aB as hn}from"./Plot-e459c07e.js";function dn(n,t){var e=0,r=0;return Float64Array.from(n,t===void 0?s=>e+=+s||0:s=>e+=+t(s,r++,n)||0)}function S(n,t,e){return(t.length!==2?N(_(n,t,e),([r,s],[o,c])=>b(s,c)||b(r,o)):N(H(n,e),([r,s],[o,c])=>t(s,c)||b(r,o))).map(([r])=>r)}function O(n,t=b){let e,r=!1;if(t.length===1){let s;for(const o of n){const c=t(o);(r?b(c,s)>0:b(c,c)===0)&&(e=o,s=c,r=!0)}}else for(const s of n)(r?t(s,e)>0:t(s,s)===0)&&(e=s,r=!0);return e}function Kn(n={}){return on(n)?n:{...n,x:J}}function Sn(n={}){return cn(n)?n:{...n,y:J}}function wn(n={},t={}){arguments.length===1&&([n,t]=Y(n));const{y1:e,y:r=e,x:s,...o}=t,[c,a,f,i]=nn(r,s,"y","x",n,o);return{...c,y1:e,y:a,x1:f,x2:i,x:R(f,i)}}function bn(n={},t={}){arguments.length===1&&([n,t]=Y(n));const{x1:e,x:r=e,y:s,...o}=t,[c,a,f,i]=nn(r,s,"x","y",n,o);return{...c,x1:e,x:a,y1:f,y2:i,y:R(f,i)}}function $n({x:n,x1:t,x2:e,...r}={}){return r=P(r,"y"),t===void 0&&e===void 0?wn({x:n,...r}):([t,e]=Q(n,t,e),{...r,x1:t,x2:e})}function jn({y:n,y1:t,y2:e,...r}={}){return r=P(r,"x"),t===void 0&&e===void 0?bn({y:n,...r}):([t,e]=Q(n,t,e),{...r,y1:t,y2:e})}function Y(n){const{offset:t,order:e,reverse:r,...s}=n;return[{offset:t,order:e,reverse:r},s]}const xn={length:!0};function nn(n,t=ln,e,r,{offset:s,order:o,reverse:c},a){const f=an(a),[i,l]=fn(n),[u,y]=T(t),[m,h]=T(t);return u.hint=m.hint=xn,s=pn(s),o=Xn(o,s,r),[un(a,(g,$,z)=>{const I=n==null?void 0:l(mn(A(g,n),z==null?void 0:z[e])),j=A(g,t,Float64Array),L=A(g,f),M=o&&o(g,I,j,L),W=g.length,x=y(new Float64Array(W)),p=h(new Float64Array(W)),q=[];for(const B of $){const D=I?Array.from(H(B,w=>I[w]).values()):[B];if(M)for(const w of D)w.sort(M);for(const w of D){let G=0,E=0;c&&w.reverse();for(const d of w){const v=j[d];v<0?G=p[d]=(x[d]=G)+v:v>0?E=p[d]=(x[d]=E)+v:p[d]=x[d]=E}}q.push(D)}return s&&s(q,x,p,L),{data:g,facets:$}}),i,u,m]}function pn(n){if(n!=null){if(typeof n=="function")return n;switch(`${n}`.toLowerCase()){case"expand":case"normalize":return vn;case"center":case"silhouette":return An;case"wiggle":return en}throw new Error(`unknown offset: ${n}`)}}function tn(n,t){let e=0,r=0;for(const s of n){const o=t[s];o<e&&(e=o),o>r&&(r=o)}return[e,r]}function vn(n,t,e){for(const r of n)for(const s of r){const[o,c]=tn(s,e);for(const a of s){const f=1/(c-o||1);t[a]=f*(t[a]-o),e[a]=f*(e[a]-o)}}}function An(n,t,e){for(const r of n){for(const s of r){const[o,c]=tn(s,e);for(const a of s){const f=(c+o)/2;t[a]-=f,e[a]-=f}}rn(r,t,e)}sn(n,t,e)}function en(n,t,e,r){for(const s of n){const o=new U;let c=0;for(const a of s){let f=-1;const i=a.map(m=>Math.abs(e[m]-t[m])),l=a.map(m=>{f=r?r[m]:++f;const h=e[m]-t[m],g=o.has(f)?h-o.get(f):0;return o.set(f,h),g}),u=[0,...dn(l)];for(const m of a)t[m]+=c,e[m]+=c;const y=X(i);y&&(c-=X(i,(m,h)=>(l[h]/2+u[h])*m)/y)}rn(s,t,e)}sn(n,t,e)}function rn(n,t,e){const r=k(n,s=>k(s,o=>t[o]));for(const s of n)for(const o of s)t[o]-=r,e[o]-=r}function sn(n,t,e){const r=n.length;if(r===1)return;const s=n.map(a=>a.flat()),o=s.map(a=>(k(a,f=>t[f])+yn(a,f=>e[f]))/2),c=k(o);for(let a=0;a<r;a++){const f=c-o[a];for(const i of s[a])t[i]+=f,e[i]+=f}}function Xn(n,t,e){if(n===void 0&&t===en)return V(C);if(n!=null){if(typeof n=="string"){const r=n.startsWith("-"),s=r?hn:C;switch((r?n.slice(1):n).toLowerCase()){case"value":case e:return kn(s);case"z":return Cn(s);case"sum":return Fn(s);case"appearance":return zn(s);case"inside-out":return V(s)}return Z(gn(n))}if(typeof n=="function")return(n.length===1?Z:In)(n);if(Array.isArray(n))return Dn(n);throw new Error(`invalid order: ${n}`)}}function kn(n){return(t,e,r)=>(s,o)=>n(r[s],r[o])}function Cn(n){return(t,e,r,s)=>(o,c)=>n(s[o],s[c])}function Fn(n){return F(n,(t,e,r,s)=>S(K(t),o=>X(o,c=>r[c]),o=>s[o]))}function zn(n){return F(n,(t,e,r,s)=>S(K(t),o=>e[O(o,c=>r[c])],o=>s[o]))}function V(n){return F(n,(t,e,r,s)=>{const o=K(t),c=S(o,u=>e[O(u,y=>r[y])],u=>s[u]),a=_(o,u=>X(u,y=>r[y]),u=>s[u]),f=[],i=[];let l=0;for(const u of c)l<0?(l+=a.get(u),f.push(u)):(l-=a.get(u),i.push(u));return i.reverse().concat(f)})}function Z(n){return t=>{const e=A(t,n);return(r,s)=>C(e[r],e[s])}}function In(n){return t=>(e,r)=>n(t[e],t[r])}function Dn(n){return F(C,()=>n)}function F(n,t){return(e,r,s,o)=>{if(!o)throw new Error("missing channel: z");const c=new U(t(e,r,s,o).map((a,f)=>[a,f]));return(a,f)=>n(c.get(o[a]),c.get(o[f]))}}export{Kn as a,jn as b,Sn as c,$n as m};
//# sourceMappingURL=stack-9d0bf26d.js.map
