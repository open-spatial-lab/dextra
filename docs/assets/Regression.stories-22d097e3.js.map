{"version":3,"file":"Regression.stories-22d097e3.js","sources":["../../node_modules/d3-shape/src/area.js","../../node_modules/@observablehq/plot/src/stats.js","../../node_modules/@observablehq/plot/src/marks/linearRegression.js","../../dextra-components/src/components/marks/Regression/src/Regression.ts"],"sourcesContent":["import array from \"./array.js\";\nimport constant from \"./constant.js\";\nimport curveLinear from \"./curve/linear.js\";\nimport line from \"./line.js\";\nimport {withPath} from \"./path.js\";\nimport {x as pointX, y as pointY} from \"./point.js\";\n\nexport default function(x0, y0, y1) {\n  var x1 = null,\n      defined = constant(true),\n      context = null,\n      curve = curveLinear,\n      output = null,\n      path = withPath(area);\n\n  x0 = typeof x0 === \"function\" ? x0 : (x0 === undefined) ? pointX : constant(+x0);\n  y0 = typeof y0 === \"function\" ? y0 : (y0 === undefined) ? constant(0) : constant(+y0);\n  y1 = typeof y1 === \"function\" ? y1 : (y1 === undefined) ? pointY : constant(+y1);\n\n  function area(data) {\n    var i,\n        j,\n        k,\n        n = (data = array(data)).length,\n        d,\n        defined0 = false,\n        buffer,\n        x0z = new Array(n),\n        y0z = new Array(n);\n\n    if (context == null) output = curve(buffer = path());\n\n    for (i = 0; i <= n; ++i) {\n      if (!(i < n && defined(d = data[i], i, data)) === defined0) {\n        if (defined0 = !defined0) {\n          j = i;\n          output.areaStart();\n          output.lineStart();\n        } else {\n          output.lineEnd();\n          output.lineStart();\n          for (k = i - 1; k >= j; --k) {\n            output.point(x0z[k], y0z[k]);\n          }\n          output.lineEnd();\n          output.areaEnd();\n        }\n      }\n      if (defined0) {\n        x0z[i] = +x0(d, i, data), y0z[i] = +y0(d, i, data);\n        output.point(x1 ? +x1(d, i, data) : x0z[i], y1 ? +y1(d, i, data) : y0z[i]);\n      }\n    }\n\n    if (buffer) return output = null, buffer + \"\" || null;\n  }\n\n  function arealine() {\n    return line().defined(defined).curve(curve).context(context);\n  }\n\n  area.x = function(_) {\n    return arguments.length ? (x0 = typeof _ === \"function\" ? _ : constant(+_), x1 = null, area) : x0;\n  };\n\n  area.x0 = function(_) {\n    return arguments.length ? (x0 = typeof _ === \"function\" ? _ : constant(+_), area) : x0;\n  };\n\n  area.x1 = function(_) {\n    return arguments.length ? (x1 = _ == null ? null : typeof _ === \"function\" ? _ : constant(+_), area) : x1;\n  };\n\n  area.y = function(_) {\n    return arguments.length ? (y0 = typeof _ === \"function\" ? _ : constant(+_), y1 = null, area) : y0;\n  };\n\n  area.y0 = function(_) {\n    return arguments.length ? (y0 = typeof _ === \"function\" ? _ : constant(+_), area) : y0;\n  };\n\n  area.y1 = function(_) {\n    return arguments.length ? (y1 = _ == null ? null : typeof _ === \"function\" ? _ : constant(+_), area) : y1;\n  };\n\n  area.lineX0 =\n  area.lineY0 = function() {\n    return arealine().x(x0).y(y0);\n  };\n\n  area.lineY1 = function() {\n    return arealine().x(x0).y(y1);\n  };\n\n  area.lineX1 = function() {\n    return arealine().x(x1).y(y0);\n  };\n\n  area.defined = function(_) {\n    return arguments.length ? (defined = typeof _ === \"function\" ? _ : constant(!!_), area) : defined;\n  };\n\n  area.curve = function(_) {\n    return arguments.length ? (curve = _, context != null && (output = curve(context)), area) : curve;\n  };\n\n  area.context = function(_) {\n    return arguments.length ? (_ == null ? context = output = null : output = curve(context = _), area) : context;\n  };\n\n  return area;\n}\n","// https://github.com/jstat/jstat\n//\n// Copyright (c) 2013 jStat\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n// SOFTWARE.\n\nexport function ibetainv(p, a, b) {\n  var EPS = 1e-8;\n  var a1 = a - 1;\n  var b1 = b - 1;\n  var j = 0;\n  var lna, lnb, pp, t, u, err, x, al, h, w, afac;\n  if (p <= 0) return 0;\n  if (p >= 1) return 1;\n  if (a >= 1 && b >= 1) {\n    pp = p < 0.5 ? p : 1 - p;\n    t = Math.sqrt(-2 * Math.log(pp));\n    x = (2.30753 + t * 0.27061) / (1 + t * (0.99229 + t * 0.04481)) - t;\n    if (p < 0.5) x = -x;\n    al = (x * x - 3) / 6;\n    h = 2 / (1 / (2 * a - 1) + 1 / (2 * b - 1));\n    w = (x * Math.sqrt(al + h)) / h - (1 / (2 * b - 1) - 1 / (2 * a - 1)) * (al + 5 / 6 - 2 / (3 * h));\n    x = a / (a + b * Math.exp(2 * w));\n  } else {\n    lna = Math.log(a / (a + b));\n    lnb = Math.log(b / (a + b));\n    t = Math.exp(a * lna) / a;\n    u = Math.exp(b * lnb) / b;\n    w = t + u;\n    if (p < t / w) x = Math.pow(a * w * p, 1 / a);\n    else x = 1 - Math.pow(b * w * (1 - p), 1 / b);\n  }\n  afac = -gammaln(a) - gammaln(b) + gammaln(a + b);\n  for (; j < 10; j++) {\n    if (x === 0 || x === 1) return x;\n    err = ibeta(x, a, b) - p;\n    t = Math.exp(a1 * Math.log(x) + b1 * Math.log(1 - x) + afac);\n    u = err / t;\n    x -= t = u / (1 - 0.5 * Math.min(1, u * (a1 / x - b1 / (1 - x))));\n    if (x <= 0) x = 0.5 * (x + t);\n    if (x >= 1) x = 0.5 * (x + t + 1);\n    if (Math.abs(t) < EPS * x && j > 0) break;\n  }\n  return x;\n}\n\nexport function ibeta(x, a, b) {\n  // Factors in front of the continued fraction.\n  var bt =\n    x === 0 || x === 1 ? 0 : Math.exp(gammaln(a + b) - gammaln(a) - gammaln(b) + a * Math.log(x) + b * Math.log(1 - x));\n  if (x < 0 || x > 1) return false;\n  if (x < (a + 1) / (a + b + 2))\n    // Use continued fraction directly.\n    return (bt * betacf(x, a, b)) / a;\n  // else use continued fraction after making the symmetry transformation.\n  return 1 - (bt * betacf(1 - x, b, a)) / b;\n}\n\nexport function betacf(x, a, b) {\n  var fpmin = 1e-30;\n  var m = 1;\n  var qab = a + b;\n  var qap = a + 1;\n  var qam = a - 1;\n  var c = 1;\n  var d = 1 - (qab * x) / qap;\n  var m2, aa, del, h;\n\n  // These q's will be used in factors that occur in the coefficients\n  if (Math.abs(d) < fpmin) d = fpmin;\n  d = 1 / d;\n  h = d;\n\n  for (; m <= 100; m++) {\n    m2 = 2 * m;\n    aa = (m * (b - m) * x) / ((qam + m2) * (a + m2));\n    // One step (the even one) of the recurrence\n    d = 1 + aa * d;\n    if (Math.abs(d) < fpmin) d = fpmin;\n    c = 1 + aa / c;\n    if (Math.abs(c) < fpmin) c = fpmin;\n    d = 1 / d;\n    h *= d * c;\n    aa = (-(a + m) * (qab + m) * x) / ((a + m2) * (qap + m2));\n    // Next step of the recurrence (the odd one)\n    d = 1 + aa * d;\n    if (Math.abs(d) < fpmin) d = fpmin;\n    c = 1 + aa / c;\n    if (Math.abs(c) < fpmin) c = fpmin;\n    d = 1 / d;\n    del = d * c;\n    h *= del;\n    if (Math.abs(del - 1.0) < 3e-7) break;\n  }\n\n  return h;\n}\n\nexport function gammaln(x) {\n  var j = 0;\n  var cof = [\n    76.18009172947146, -86.5053203294167, 24.01409824083091, -1.231739572450155, 0.1208650973866179e-2,\n    -0.5395239384953e-5\n  ];\n  var ser = 1.000000000190015;\n  var xx, y, tmp;\n  tmp = (y = xx = x) + 5.5;\n  tmp -= (xx + 0.5) * Math.log(tmp);\n  for (; j < 6; j++) ser += cof[j] / ++y;\n  return Math.log((2.506628274631 * ser) / xx) - tmp;\n}\n\nexport function qt(p, dof) {\n  var x = ibetainv(2 * Math.min(p, 1 - p), 0.5 * dof, 0.5);\n  x = Math.sqrt((dof * (1 - x)) / x);\n  return p > 0.5 ? x : -x;\n}\n","import {extent, range, sum, area as shapeArea, namespaces} from \"d3\";\nimport {create} from \"../context.js\";\nimport {Mark} from \"../mark.js\";\nimport {identity, indexOf, isNone, isNoneish, maybeZ} from \"../options.js\";\nimport {qt} from \"../stats.js\";\nimport {applyDirectStyles, applyGroupedChannelStyles, applyIndirectStyles, applyTransform, groupZ} from \"../style.js\";\nimport {maybeDenseIntervalX, maybeDenseIntervalY} from \"../transforms/bin.js\";\n\nconst defaults = {\n  ariaLabel: \"linear-regression\",\n  fill: \"currentColor\",\n  fillOpacity: 0.1,\n  stroke: \"currentColor\",\n  strokeWidth: 1.5,\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\",\n  strokeMiterlimit: 1\n};\n\nclass LinearRegression extends Mark {\n  constructor(data, options = {}) {\n    const {x, y, z, ci = 0.95, precision = 4} = options;\n    super(\n      data,\n      {\n        x: {value: x, scale: \"x\"},\n        y: {value: y, scale: \"y\"},\n        z: {value: maybeZ(options), optional: true}\n      },\n      options,\n      defaults\n    );\n    this.z = z;\n    this.ci = +ci;\n    this.precision = +precision;\n    if (!(0 <= this.ci && this.ci < 1)) throw new Error(`invalid ci; not in [0, 1): ${ci}`);\n    if (!(this.precision > 0)) throw new Error(`invalid precision: ${precision}`);\n  }\n  render(index, scales, channels, dimensions, context) {\n    const {x: X, y: Y, z: Z} = channels;\n    const {ci} = this;\n    return create(\"svg:g\", context)\n      .call(applyIndirectStyles, this, dimensions, context)\n      .call(applyTransform, this, scales)\n      .call((g) =>\n        g\n          .selectAll()\n          .data(Z ? groupZ(index, Z, this.z) : [index])\n          .enter()\n          .call((enter) =>\n            enter\n              .append(\"path\")\n              .attr(\"fill\", \"none\")\n              .call(applyDirectStyles, this)\n              .call(applyGroupedChannelStyles, this, {...channels, fill: null, fillOpacity: null})\n              .attr(\"d\", (I) => this._renderLine(I, X, Y))\n              .call(\n                ci && !isNone(this.fill)\n                  ? (path) =>\n                      path\n                        .select(pathBefore)\n                        .attr(\"stroke\", \"none\")\n                        .call(applyDirectStyles, this)\n                        .call(applyGroupedChannelStyles, this, {\n                          ...channels,\n                          stroke: null,\n                          strokeOpacity: null,\n                          strokeWidth: null\n                        })\n                        .attr(\"d\", (I) => this._renderBand(I, X, Y))\n                  : () => {}\n              )\n          )\n      )\n      .node();\n  }\n}\n\nfunction pathBefore() {\n  return this.parentNode.insertBefore(this.ownerDocument.createElementNS(namespaces.svg, \"path\"), this);\n}\n\nclass LinearRegressionX extends LinearRegression {\n  constructor(data, options) {\n    super(data, options);\n  }\n  _renderBand(I, X, Y) {\n    const {ci, precision} = this;\n    const [y1, y2] = extent(I, (i) => Y[i]);\n    const f = linearRegressionF(I, Y, X);\n    const g = confidenceIntervalF(I, Y, X, (1 - ci) / 2, f);\n    return shapeArea()\n      .y((y) => y)\n      .x0((y) => g(y, -1))\n      .x1((y) => g(y, +1))(range(y1, y2 - precision / 2, precision).concat(y2));\n  }\n  _renderLine(I, X, Y) {\n    const [y1, y2] = extent(I, (i) => Y[i]);\n    const f = linearRegressionF(I, Y, X);\n    return `M${f(y1)},${y1}L${f(y2)},${y2}`;\n  }\n}\n\nclass LinearRegressionY extends LinearRegression {\n  constructor(data, options) {\n    super(data, options);\n  }\n  _renderBand(I, X, Y) {\n    const {ci, precision} = this;\n    const [x1, x2] = extent(I, (i) => X[i]);\n    const f = linearRegressionF(I, X, Y);\n    const g = confidenceIntervalF(I, X, Y, (1 - ci) / 2, f);\n    return shapeArea()\n      .x((x) => x)\n      .y0((x) => g(x, -1))\n      .y1((x) => g(x, +1))(range(x1, x2 - precision / 2, precision).concat(x2));\n  }\n  _renderLine(I, X, Y) {\n    const [x1, x2] = extent(I, (i) => X[i]);\n    const f = linearRegressionF(I, X, Y);\n    return `M${x1},${f(x1)}L${x2},${f(x2)}`;\n  }\n}\n\nexport function linearRegressionX(\n  data,\n  {y = indexOf, x = identity, stroke, fill = isNoneish(stroke) ? \"currentColor\" : stroke, ...options} = {}\n) {\n  return new LinearRegressionX(data, maybeDenseIntervalY({...options, x, y, fill, stroke}));\n}\n\nexport function linearRegressionY(\n  data,\n  {x = indexOf, y = identity, stroke, fill = isNoneish(stroke) ? \"currentColor\" : stroke, ...options} = {}\n) {\n  return new LinearRegressionY(data, maybeDenseIntervalX({...options, x, y, fill, stroke}));\n}\n\nfunction linearRegressionF(I, X, Y) {\n  let sumX = 0,\n    sumY = 0,\n    sumXY = 0,\n    sumX2 = 0;\n  for (const i of I) {\n    const xi = X[i];\n    const yi = Y[i];\n    sumX += xi;\n    sumY += yi;\n    sumXY += xi * yi;\n    sumX2 += xi * xi;\n  }\n  const n = I.length;\n  const slope = (n * sumXY - sumX * sumY) / (n * sumX2 - sumX * sumX);\n  const intercept = (sumY - slope * sumX) / n;\n  return (x) => slope * x + intercept;\n}\n\nfunction confidenceIntervalF(I, X, Y, p, f) {\n  const mean = sum(I, (i) => X[i]) / I.length;\n  let a = 0,\n    b = 0;\n  for (const i of I) {\n    a += (X[i] - mean) ** 2;\n    b += (Y[i] - f(X[i])) ** 2;\n  }\n  const sy = Math.sqrt(b / (I.length - 2));\n  const t = qt(p, I.length - 2);\n  return (x, k) => {\n    const Y = f(x);\n    const se = sy * Math.sqrt(1 / I.length + (x - mean) ** 2 / a);\n    return Y + k * t * se;\n  };\n}\n","import { customElement, property } from \"lit/decorators.js\";\nimport { PlotMark } from \"../../PlotMark/src/PlotMark\";\nimport * as Plot from \"@observablehq/plot\";\nimport { LinearRegressionOptions } from \"@observablehq/plot\";\nimport { LinearRegressionYOptions } from \"@observablehq/plot\";\nimport { safeCustomElement } from \"../../../core/decorators/safeCustomElement\";\n\n\n@safeCustomElement(\"osl-regression-plot\")\nexport class OslRegressionPlot extends PlotMark {\n  mark = \"regression\"\n\n  @property({ type: String })\n  x?: LinearRegressionYOptions[\"x\"];\n\n  @property({ type: String })\n  y?: LinearRegressionYOptions[\"y\"];\n\n  @property({ type: String })\n  ci?: LinearRegressionOptions[\"ci\"];\n\n  @property({ type: Boolean })\n  regressionX?: boolean=false;\n\n  markOptions: (keyof this)[] = [\"x\", \"y\", \"ci\"];\n\n  public get plot() {\n    const innerData = this?.currentResults;\n    const options = this.allOptions;\n\n    return (overrideData?: any, overrideOptions?: {}) => {\n      const data = innerData?.length ? innerData : overrideData;\n      \n      if (this.regressionX) {\n        return Plot.linearRegressionX(data, { ...overrideOptions, ...options});\n      } else {\n        return Plot.linearRegressionY(data, { ...overrideOptions, ...options});\n      }\n    };\n  }\n\n  render() {\n    return null\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"osl-regression-plot\": OslRegressionPlot;\n  }\n}"],"names":["shapeArea","x0","y0","y1","x1","defined","constant","context","curve","curveLinear","output","path","withPath","area","pointX","pointY","data","i","j","k","n","array","defined0","buffer","x0z","y0z","arealine","line","_","ibetainv","p","a","b","EPS","a1","b1","lna","lnb","pp","t","u","err","x","al","h","w","afac","gammaln","ibeta","bt","betacf","fpmin","m","qab","qap","qam","c","d","m2","aa","del","cof","ser","xx","y","tmp","qt","dof","defaults","LinearRegression","Mark","options","z","ci","precision","maybeZ","index","scales","channels","dimensions","X","Y","Z","create","applyIndirectStyles","applyTransform","g","groupZ","enter","applyDirectStyles","applyGroupedChannelStyles","I","isNone","pathBefore","namespaces","y2","extent","f","linearRegressionF","confidenceIntervalF","range","x2","linearRegressionX","indexOf","identity","stroke","fill","isNoneish","LinearRegressionX","maybeDenseIntervalY","linearRegressionY","LinearRegressionY","maybeDenseIntervalX","sumX","sumY","sumXY","sumX2","xi","yi","slope","intercept","mean","sum","sy","se","OslRegressionPlot","PlotMark","innerData","overrideData","overrideOptions","Plot.linearRegressionX","Plot.linearRegressionY","__decorateClass","property","safeCustomElement"],"mappings":"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","x_google_ignoreList":[0,1,2]}