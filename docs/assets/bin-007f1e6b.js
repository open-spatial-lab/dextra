import{F as E,G as Ne,H as ie,I as ae,J as T,K as B,L as ee,N as Ue,O as ne,P as qe,Q as He,R as Je,o as Pe,S as Qe,T as We,U as _e,V as pe,W as Ee,X as en,Y as nn,b as Z,Z as se,_ as tn,$ as Y,a0 as rn,a1 as te,a2 as cn,a3 as oe,a4 as an,a5 as sn,a6 as on,a7 as C,a8 as ue,a9 as un,aa as fn,ab as ln,ac as dn,ad as mn}from"./Plot-e459c07e.js";import{t as yn}from"./sturges-e5ae102c.js";import{c as fe}from"./count-17af7dc7.js";function hn(e,n,t){const r=fe(e),c=E(e,.75)-E(e,.25);return r&&c?Math.ceil((t-n)/(2*c*Math.pow(r,-1/3))):1}function le(e,n,t){const r=fe(e),c=Ne(e);return r&&c?Math.ceil((t-n)*Math.cbrt(r)/(3.49*c)):1}function bn(e={y:"count"},n={}){[e,n]=j(e,n);const{x:t,y:r}=n;return O(z(t,n,Z),null,null,r,e,ie(n))}function In(e={x:"count"},n={}){[e,n]=j(e,n);const{x:t,y:r}=n;return O(null,z(r,n,Z),t,null,e,ae(n))}function jn(e={fill:"count"},n={}){[e,n]=j(e,n);const{x:t,y:r}=xn(n);return O(t,r,null,null,e,ie(ae(n)))}function de(e,n,t={}){return(t==null?void 0:t.interval)==null?t:e({[n]:(t==null?void 0:t.reduce)===void 0?mn:t.reduce,filter:null},t)}function Ln(e={}){return de(bn,"y",se(e,"x"))}function $n(e={}){return de(In,"x",se(e,"y"))}function O(e,n,t,r,{data:c=qe,filter:i=He,sort:s,reverse:l,...u}={},f={}){e=re(e),n=re(n),u=Xn(u,f),c=he(c,Z),s=s==null?void 0:me("sort",s,f),i=i==null?void 0:ye("filter",i,f),t!=null&&T(u,"x","x1","x2")&&(t=null),r!=null&&T(u,"y","y1","y2")&&(r=null);const[o,d]=B(e),[a,m]=B(e),[y,I]=B(n),[x,b]=B(n),[$,N]=t!=null?[t,"x"]:r!=null?[r,"y"]:[],[U,Ie]=B($),{x:xe,y:Be,z:D,fill:q,stroke:H,x1:Xe,x2:Ge,y1:Fe,y2:ge,domain:Dn,cumulative:An,thresholds:Kn,interval:Rn,...ve}=f,[ke,we]=B(D),[J]=ee(q),[P]=ee(H),[Ye,Me]=B(J),[Se,Te]=B(P);return{..."z"in f&&{z:ke||D},..."fill"in f&&{fill:Ye||q},..."stroke"in f&&{stroke:Se||H},...Ue(ve,(h,A,K)=>{const R=tn(Y(h,$),K==null?void 0:K[N]),g=Y(h,D),v=Y(h,J),k=Y(h,P),S=rn(u,{z:g,fill:v,stroke:k}),V=[],Q=[],Ce=R&&Ie([]),ze=g&&we([]),De=v&&Me([]),Ae=k&&Te([]),W=e&&d([]),Ke=e&&m([]),_=n&&I([]),Re=n&&b([]),Ve=vn(e==null?void 0:e(h),n==null?void 0:n(h));let Ze=0;for(const F of u)F.initialize(h);s&&s.initialize(h),i&&i.initialize(h);for(const F of A){const p=[];for(const w of u)w.scope("facet",F);s&&s.scope("facet",F),i&&i.scope("facet",F);for(const[w,Oe]of te(F,S))for(const[je,Le]of te(Oe,R))for(const[X,G]of Ve(Le))if(!(i&&!i.reduce(X,G))){p.push(Ze++),Q.push(c.reduceIndex(X,h,G)),R&&Ce.push(je),g&&ze.push(S===g?w:g[X[0]]),v&&De.push(S===v?w:v[X[0]]),k&&Ae.push(S===k?w:k[X[0]]),W&&(W.push(G.x1),Ke.push(G.x2)),_&&(_.push(G.y1),Re.push(G.y2));for(const $e of u)$e.reduce(X,G);s&&s.reduce(X)}V.push(p)}return cn(V,s,l),{data:Q,facets:V}}),...!T(u,"x")&&(o?{x1:o,x2:a,x:ne(o,a)}:{x:xe,x1:Xe,x2:Ge}),...!T(u,"y")&&(y?{y1:y,y2:x,y:ne(y,x)}:{y:Be,y1:Fe,y2:ge}),...U&&{[N]:U},...Object.fromEntries(u.map(({name:h,output:A})=>[h,A]))}}function j({cumulative:e,domain:n,thresholds:t,interval:r,...c},i){return[c,{cumulative:e,domain:n,thresholds:t,interval:r,...i}]}function z(e,{cumulative:n,domain:t,thresholds:r,interval:c},i){return e={...Je(e)},e.domain===void 0&&(e.domain=t),e.cumulative===void 0&&(e.cumulative=n),e.thresholds===void 0&&(e.thresholds=r),e.interval===void 0&&(e.interval=c),e.value===void 0&&(e.value=i),e.thresholds=Bn(e.thresholds,e.interval),e}function xn(e){let{x:n,y:t}=e;return n=z(n,e),t=z(t,e),[n.value,t.value]=Pe(n.value,t.value),{x:n,y:t}}function re(e){if(e==null)return;const{value:n,cumulative:t,domain:r=C,thresholds:c}=e,i=s=>{let l=Y(s,n),u;if(oe(l)||Fn(c)){l=an(l,sn,Float64Array);let[o,d]=typeof r=="function"?r(l):r,a=typeof c=="function"&&!M(c)?c(l,o,d):c;typeof a=="number"&&(a=on(o,d,a)),M(a)&&(r===C&&(o=a.floor(o),d=a.offset(a.floor(d))),a=a.range(o,a.offset(d))),u=a}else{l=ue(l);let[o,d]=typeof r=="function"?r(l):r,a=typeof c=="function"&&!M(c)?c(l,o,d):c;if(typeof a=="number")if(r===C){let m=un(o,d,a);if(isFinite(m))if(m>0){let y=Math.round(o/m),I=Math.round(d/m);y*m<=o||--y,I*m>d||++I;let x=I-y+1;a=new Float64Array(x);for(let b=0;b<x;++b)a[b]=(y+b)*m}else if(m<0){m=-m;let y=Math.round(o*m),I=Math.round(d*m);y/m<=o||--y,I/m>d||++I;let x=I-y+1;a=new Float64Array(x);for(let b=0;b<x;++b)a[b]=(y+b)/m}else a=[o];else a=[o]}else a=fn(o,d,a);else M(a)&&(r===C&&(o=a.floor(o),d=a.offset(a.floor(d))),a=a.range(o,a.offset(d)));u=a}const f=[];if(u.length===1)f.push([u[0],u[0]]);else for(let o=1;o<u.length;++o)f.push([u[o-1],u[o]]);return f.bin=(t<0?wn:t>0?kn:L)(f,u,l),f};return i.label=Qe(n),i}function Bn(e,n,t=ce){if(e===void 0)return n===void 0?t:We(n);if(typeof e=="string"){switch(e.toLowerCase()){case"freedman-diaconis":return hn;case"scott":return le;case"sturges":return yn;case"auto":return ce}return _e(e)}return e}function Xn(e,n){return pe(e,n,me)}function me(e,n,t){return Ee(e,n,t,ye)}function ye(e,n,t){return en(e,n,t,he)}function he(e,n){return nn(e,n,Gn)}function Gn(e){switch(`${e}`.toLowerCase()){case"x":return Yn;case"x1":return Sn;case"x2":return Tn;case"y":return Mn;case"y1":return Cn;case"y2":return zn}throw new Error(`invalid bin reduce: ${e}`)}function ce(e,n,t){return Math.min(200,le(e,n,t))}function Fn(e){return gn(e)||ln(e)&&oe(e)}function gn(e){return M(e)&&typeof e=="function"&&e()instanceof Date}function M(e){return typeof(e==null?void 0:e.range)=="function"}function vn(e,n){return e&&n?function*(t){const r=e.bin(t);for(const[c,[i,s]]of e.entries()){const l=n.bin(r[c]);for(const[u,[f,o]]of n.entries())yield[l[u],{x1:i,y1:f,x2:s,y2:o}]}}:e?function*(t){const r=e.bin(t);for(const[c,[i,s]]of e.entries())yield[r[c],{x1:i,x2:s}]}:function*(t){const r=n.bin(t);for(const[c,[i,s]]of n.entries())yield[r[c],{y1:i,y2:s}]}}function L(e,n,t){return n=ue(n),r=>{var i;const c=e.map(()=>[]);for(const s of r)(i=c[dn(n,t[s])-1])==null||i.push(s);return c}}function kn(e,n,t){const r=L(e,n,t);return c=>{const i=r(c);for(let s=1,l=i.length;s<l;++s){const u=i[s-1],f=i[s];for(const o of u)f.push(o)}return i}}function wn(e,n,t){const r=L(e,n,t);return c=>{const i=r(c);for(let s=i.length-2;s>=0;--s){const l=i[s+1],u=i[s];for(const f of l)u.push(f)}return i}}function be(e,n){const t=(+e+ +n)/2;return e instanceof Date?new Date(t):t}const Yn={reduceIndex(e,n,{x1:t,x2:r}){return be(t,r)}},Mn={reduceIndex(e,n,{y1:t,y2:r}){return be(t,r)}},Sn={reduceIndex(e,n,{x1:t}){return t}},Tn={reduceIndex(e,n,{x2:t}){return t}},Cn={reduceIndex(e,n,{y1:t}){return t}},zn={reduceIndex(e,n,{y2:t}){return t}};export{bn as a,In as b,jn as c,Ln as d,$n as m};
//# sourceMappingURL=bin-007f1e6b.js.map
